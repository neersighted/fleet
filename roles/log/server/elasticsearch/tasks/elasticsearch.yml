- name: elasticsearch | add elasticsearch repo key (apt)
  apt_key: id=D88E42B4 url=http://packages.elasticsearch.org/GPG-KEY-elasticsearch state=present
  when: ansible_pkg_mgr == 'apt'

- name: elasticsearch | add elasticsearch repo (apt)
  apt_repository: repo='deb http://packages.elasticsearch.org/elasticsearch/1.1/debian stable main' state=present
  when: ansible_pkg_mgr == 'apt'

- name: elasticsearch | install elasticsearch (apt)
  apt: pkg=elasticsearch state=latest
  when: ansible_pkg_mgr == 'apt'

- name: elasticsearch | configure elasticsearch
  template: src=elasticsearch.yml dest=/etc/elasticsearch/elasticsearch.yml

- name: elasticsearch | enable and start elasticsearch
  service: name=elasticsearch state=started enabled=yes
